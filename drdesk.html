<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Hospital Management</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="css/bootstrap-select.css">
<link rel="stylesheet" href="css/bootstrap-select.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="css/style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script> 
<script src="js/bootstrap-select.js"></script>
<script src="js/bootstrap-select.min.js"></script>
<script type="text/javascript" src="js/jquery.validate.min.js"></script>
<script type="text/javascript">
$(document).ready(function () {
	var userid = localStorage.getItem('userid');
	if (userid == "0") {
	    var ur="index.html"
	    $(location).attr('href', ur);
	} else {
	var username=localStorage.getItem('username');
	  var s1="Welcome ";
   
    $("#user").text(s1.concat(username));
	$('.selectpicker').selectpicker();	    
	var Assigned=1;
	 $.ajax({
        type: "GET",
        contentType: "text/plain",
        url: localStorage.getItem('WcfURL')+"/DrDeskPatientList.php?userid="+userid+"&id="+Assigned,
        data: "{}",
        dataType: "JSON",
        success: function(data) {
        	
           
            $("#Test thead").remove();
            $("#Test tr").remove();
            $("#Test th").remove();
            $("#Test tbody").remove();
            $("#Test td").remove();
            var tr;
             tr = $("<thead>");
             tr.append("<tr><th style='text-align:left'></th><th style='text-align:left'>Name & ID</th><th style='text-align:left'>InTime</th><th style='text-align:left'>TimeSpent</th></tr>"); // bind table header row
             $("#Test").append(tr);
             tr.append("</thead>");
             $("#Test").append(tr);
             var tbody = $("<tbody>");
             $("#Test").append(tbody);
             $("#Test").append(tr);
             tr = $("<tr></tr>");
             if(data.firstname.length >= "1")
      	   {
             for (var i = 0; i < data.firstname.length; i++) {
             	
                 tr = $("<tr class='highlight'></tr>");
                 tr.append("<td style='width:7%'><input type='radio' name='tblChk' id='tblChk' value=" + data.firstname[i] + " >" + "</td><td>" + data.firstname[i] + "-" +data.p_id[i] +"</td><td >" + data.TIMEONLY[i] + "</td><td>" +data.TotalTime[i] + "</td>");
                 $("#Test").append(tr);
                 $('#Test').append(tbody);
             }
            	
        	   }
           else
        	   {
        	   $("#submit").hide();
        	   }
        },
        error: function(Result) {
       	 
       	 
        }
    });
var waiting=2;	
	 $.ajax({
	        type: "GET",
	        contentType: "text/plain",
	        url: localStorage.getItem('WcfURL')+"/DrDeskPatientList.php?userid="+userid+"&id="+waiting,
	        data: "{}",
	        dataType: "JSON",
	        success: function(data) {
	        	
	           
	            $("#Waiting thead").remove();
	            $("#Waiting tr").remove();
	            $("#Waiting th").remove();
	            $("#Waiting tbody").remove();
	            $("#Waiting td").remove();
	            var tr;
	             tr = $("<thead>");
	             tr.append("<tr><th style='text-align:left'>Name & ID</th><th style='text-align:left'>InTime</th><th style='text-align:left'>TimeSpent</th></tr>"); // bind table header row
	             $("#Waiting").append(tr);
	             tr.append("</thead>");
	             $("#Waiting").append(tr);
	             var tbody = $("<tbody>");
	             $("#Waiting").append(tbody);
	             $("#Waiting").append(tr);
	             tr = $("<tr></tr>");
	             
	             for (var i = 0; i < data.firstname.length; i++) {
	             	
	                 tr = $("<tr class='highlight'></tr>");
	                 tr.append("<td>" + data.firstname[i] + "-" +data.p_id[i] + "</td><td >" + data.TIMEONLY[i] + "</td><td>" +data.TotalTime[i] + "</td>");
	                 
	                 $("#Waiting").append(tr);
	                 $('#Waiting').append(tbody);
	             }
	            	
	            
	        },
	        error: function(Result) {
	       	 
	       	 
	        }
	    });
	 var visited=3;
	 $.ajax({
	        type: "GET",
	        contentType: "text/plain",
	        url: localStorage.getItem('WcfURL')+"/DrDeskPatientList.php?userid="+userid+"&id="+visited,
	        data: "{}",
	        dataType: "JSON",
	        success: function(data) {
	        	
	           
	            $("#Visited thead").remove();
	            $("#Visited tr").remove();
	            $("#Visited th").remove();
	            $("#Visited tbody").remove();
	            $("#Visited td").remove();
	            var tr;
	             tr = $("<thead>");
	             tr.append("<tr><th style='text-align:left'>Name & ID</th><th style='text-align:left'>InTime</th><th style='text-align:left'>TimeSpent</th></tr>"); // bind table header row
	             $("#Visited").append(tr);
	             tr.append("</thead>");
	             $("#Visited").append(tr);
	             var tbody = $("<tbody>");
	             $("#Visited").append(tbody);
	             $("#Visited").append(tr);
	             tr = $("<tr></tr>");
	             
	             for (var i = 0; i < data.firstname.length; i++) {
	             	
	                 tr = $("<tr class='highlight'></tr>");
	                 tr.append("<td>" + data.firstname[i] + "-" +data.p_id[i] + "</td><td >" + data.TIMEONLY[i] + "</td><td>" +data.TotalTime[i] + "</td>");
	                 $("#Visited").append(tr);
	                 $('#Visited').append(tbody);
	             }
	            	
	            
	        },
	        error: function(Result) {
	       	 
	       	 
	        }
	    });
	 $("#drdesk").validate({
         
         rules: {         	 
        	 tblChk:{
             	required:true
             },
             
         },
         errorPlacement: function(error, element) {
             if ( element.is(":radio") ) {
             	error.insertAfter( element.parent() );
             }
             else if(element.is(":checkbox"))
             {
             	error.insertBefore( element.parent() );
             }
             else { // This is the default behavior of the script
                 error.insertAfter( element );
             }
         },
         
         submitHandler: function(form) {
        	 $('#submit').attr('disabled',false);
     		
     		var pname = $('input[id="tblChk"]:checked').val();					
     		$.ajax({
                     type: "GET",
                     contentType: "application/json; charset=utf-8",
                     url: localStorage.getItem('WcfURL')+"/DrDesk.php?p_name="+pname+"&userid="+userid,
     				data: "{}",
                    dataType: "JSON",
     			 success: function(data){
     					
     			alert("Assigned successfully")
     			location.reload();
     			}	,
     error: function(XMLHttpRequest, textStatus, errorThrown) { 
     	alert("Patient Queued");
     	 location.reload();   
                 }	     		                    
     			});
     		 location.reload();
         }
	 }); 
	}
});

</script>
<style type="text/css">
    .bs-example{
    	margin: 20px;
    }
    .borderless tbody tr td, .borderless tbody tr th, .borderless thead tr th {
    border: none;
}
 input.error, select.error {
      background: #ffd1cc;
}
.highlight {
	background-color: lightyellow;
}
.table-striped > tbody > tr:nth-child(odd).highlight > td {
    background-color: pink;
}

/* supersede bootstrap at the cell level by being annoyingly specific */
.table-striped > tbody > tr:nth-child(odd) > td.highlight {
	background-color:lightgreen;
}
form label.error{font:10px Tahoma,sans-serif;color:#ED7476;margin-left:5px; display:inline;}form input.error,form input.error:hover,form input.error:focus,form select.error,form textarea.error{border:1px solid #ED7476;background:#FFEDED}
#errorContainer {
                    display: none;
                    overflow: auto;
                    background-color: #FFDDDD;
                    border: 1px solid #FF2323;
                    padding-top: 1;
                }

                #errorContainer label {
                    float: none;
                    width: auto;
                }

                input.error {
                    border: 1px solid #FF2323;
                }
                 @media only screen
and (min-device-width : 768px)
and (max-device-width : 1024px)
 and (orientation: landscape) {
.login-panel
{
width:85% !important;
margin-left: auto !important;
    margin-right: auto !important;

}
}
 @media screen and (min-device-width: 1024px) and (min-device-height: 768px){
.row
{
width:60% !important;
margin-left: auto !important;
    margin-right: auto !important;

}
@media screen and (min-device-width: 1280px) and (min-device-height: 1024px){
.row
{
width:60% !important;
margin-left: auto !important;
    margin-right: auto !important;

}          
</style>
</head>
<body>
<nav class="navbar navbar-default">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#"> Smart Hospital</a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">           		
            <ul class="nav navbar-nav navbar-right">
              <li><a href="index.html">Log out</a></li>
            </ul>
              <ul class="nav navbar-nav navbar-right">
              <li><a href="#" id="user"></a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
      </nav>
		    <div class="container">
			
<div class="jumbotron" style="background-color : #FFFFFF ">  
        <div class="row">
            <div class="col-md-11 col-md-offset-1">
                <div class="login-panel panel panel-default" style="border-style: hidden;">
                    <div class="panel-heading">
                        <h3 class="panel-title" align="center">Doctor Desk</h3>
                    </div>
                    <div class="panel-body">
                      
                        <div id="content">
    <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
        <li class="active"><a href="#red" data-toggle="tab">Assigned</a></li>
        <li><a href="#orange" data-toggle="tab">Waiting</a></li>
        <li><a href="#yellow" data-toggle="tab">Visited</a></li>
        
    </ul>
    <div id="my-tab-content" class="tab-content">
        <div class="tab-pane active" id="red">
             <form id="drdesk">
               <fieldset>
							
							 <div class="table-responsive">	
								<table class="table borderless table-condensed table-striped" data-show-header="false" id="Test" >	                        
		                         </table> 
		                         
		                         </div>							
							
								<br>
                                <!-- Change this to a button or input when using this as a form -->
                                <button class="btn btn-lg btn-success btn-block" name="submit" id="submit" value="click me">Submit</button>
                                
                                <!--<a href="#" class="btn btn-lg btn-success btn-block" onclick="return btntest_onclick()">Submit</a>-->
                            </fieldset>
                            </form>
        </div>
        <div class="tab-pane" id="orange">
             <fieldset>
							
							<div class="table-responsive">	
								<table class="table borderless table-condensed table-striped" data-show-header="false" id="Waiting" >	                        
		                         </table> 
		                         </div>
								
								<br>
							
								<br>
                                <!-- Change this to a button or input when using this as a form -->                                
                                <!--<a href="#" class="btn btn-lg btn-success btn-block" onclick="return btntest_onclick()">Submit</a>-->
                            </fieldset>
            
        </div>
        <div class="tab-pane" id="yellow">
            <fieldset>
							<div class="table-responsive">	
								<table class="table borderless table-condensed table-striped" data-show-header="false" id="Visited" >	                        
		                         </table> 
		                         </div>							
								<br>
							
								<br>
                                <!-- Change this to a button or input when using this as a form -->                                
                                <!--<a href="#" class="btn btn-lg btn-success btn-block" onclick="return btntest_onclick()">Submit</a>-->
                            </fieldset>
        </div>      
    </div>
</div>

                    </div>
                </div>
            </div>
        </div>
</div>		
    </div>


</body>
</html>                                		